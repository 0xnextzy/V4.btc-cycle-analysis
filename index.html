<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Intelligence Dashboard | Multi-Layer Market Framework</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Space+Mono:wght@400;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
/* ============================================
   BITCOIN INTELLIGENCE DASHBOARD STYLES
   ============================================ */

/* CSS Variables */
:root {
    /* Core Colors - Vibrant Theme */
    --bg-primary: #0f0326;
    --bg-secondary: #1a0b3f;
    --bg-card: linear-gradient(135deg, rgba(88, 28, 135, 0.2), rgba(49, 46, 129, 0.2));
    --bg-card-hover: linear-gradient(135deg, rgba(88, 28, 135, 0.4), rgba(49, 46, 129, 0.4));
    
    /* Vibrant Accent Colors */
    --accent-primary: #8b5cf6;
    --accent-secondary: #ec4899;
    --accent-green: #10b981;
    --accent-cyan: #06b6d4;
    --accent-yellow: #fbbf24;
    --accent-red: #ef4444;
    --accent-orange: #f97316;
    --accent-blue: #3b82f6;
    
    /* Text Colors */
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;
    
    /* Gradients */
    --gradient-primary: linear-gradient(135deg, #8b5cf6, #ec4899);
    --gradient-secondary: linear-gradient(135deg, #06b6d4, #8b5cf6);
    --gradient-success: linear-gradient(135deg, #10b981, #06b6d4);
    --gradient-warning: linear-gradient(135deg, #f97316, #fbbf24);
    --gradient-danger: linear-gradient(135deg, #ef4444, #f97316);
    --gradient-cosmic: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    
    /* Border & Effects */
    --border-color: rgba(139, 92, 246, 0.2);
    --shadow-sm: 0 2px 8px rgba(139, 92, 246, 0.1);
    --shadow-md: 0 4px 16px rgba(139, 92, 246, 0.2);
    --shadow-lg: 0 8px 32px rgba(139, 92, 246, 0.3);
    --shadow-glow: 0 0 30px rgba(139, 92, 246, 0.4);
    --shadow-glow-pink: 0 0 30px rgba(236, 72, 153, 0.4);
    
    /* Typography */
    --font-mono: 'JetBrains Mono', 'IBM Plex Mono', monospace;
    --font-display: 'Space Mono', monospace;
    
    /* Spacing */
    --spacing-xs: 8px;
    --spacing-sm: 16px;
    --spacing-md: 24px;
    --spacing-lg: 32px;
    --spacing-xl: 48px;
    --spacing-2xl: 80px;
    
    /* Border Radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 20px;
    --radius-xl: 24px;
}

/* ============================================
   RESET & BASE
   ============================================ */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-mono);
    background: var(--bg-primary);
    color: var(--text-primary);
    line-height: 1.6;
    font-size: 14px;
    overflow-x: hidden;
    position: relative;
}

/* Animated gradient background */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(236, 72, 153, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(6, 182, 212, 0.1) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
    animation: gradientShift 15s ease infinite;
}

@keyframes gradientShift {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.8;
    }
}

/* Grid pattern overlay */
body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        linear-gradient(rgba(139, 92, 246, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(139, 92, 246, 0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
}

.container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 var(--spacing-md);
    position: relative;
    z-index: 1;
}

/* ============================================
   FLOATING PARTICLES
   ============================================ */

.particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    pointer-events: none;
    z-index: 0;
}

.particle {
    position: absolute;
    width: 4px;
    height: 4px;
    background: radial-gradient(circle, rgba(139, 92, 246, 0.8), transparent);
    border-radius: 50%;
    animation: float 15s infinite ease-in-out;
    opacity: 0;
}

.particle:nth-child(1) {
    left: 10%;
    animation-delay: 0s;
    animation-duration: 12s;
}

.particle:nth-child(2) {
    left: 20%;
    animation-delay: 2s;
    animation-duration: 15s;
    background: radial-gradient(circle, rgba(236, 72, 153, 0.8), transparent);
}

.particle:nth-child(3) {
    left: 30%;
    animation-delay: 4s;
    animation-duration: 18s;
}

.particle:nth-child(4) {
    left: 40%;
    animation-delay: 1s;
    animation-duration: 14s;
    background: radial-gradient(circle, rgba(6, 182, 212, 0.8), transparent);
}

.particle:nth-child(5) {
    left: 50%;
    animation-delay: 3s;
    animation-duration: 16s;
}

.particle:nth-child(6) {
    left: 60%;
    animation-delay: 5s;
    animation-duration: 13s;
    background: radial-gradient(circle, rgba(236, 72, 153, 0.8), transparent);
}

.particle:nth-child(7) {
    left: 70%;
    animation-delay: 2s;
    animation-duration: 17s;
}

.particle:nth-child(8) {
    left: 80%;
    animation-delay: 4s;
    animation-duration: 15s;
    background: radial-gradient(circle, rgba(6, 182, 212, 0.8), transparent);
}

.particle:nth-child(9) {
    left: 85%;
    animation-delay: 1s;
    animation-duration: 14s;
}

.particle:nth-child(10) {
    left: 95%;
    animation-delay: 3s;
    animation-duration: 16s;
    background: radial-gradient(circle, rgba(236, 72, 153, 0.8), transparent);
}

@keyframes float {
    0% {
        transform: translateY(100vh) scale(0);
        opacity: 0;
    }
    10% {
        opacity: 1;
    }
    90% {
        opacity: 1;
    }
    100% {
        transform: translateY(-100vh) scale(1.5);
        opacity: 0;
    }
}

/* ============================================
   HEADER
   ============================================ */

.header {
    padding: var(--spacing-lg) 0;
    border-bottom: 1px solid var(--border-color);
    background: rgba(15, 3, 38, 0.7);
    backdrop-filter: blur(20px);
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 4px 30px rgba(139, 92, 246, 0.1);
}

.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--spacing-md);
}

.header-left {
    flex: 1;
}

.header-title {
    font-family: var(--font-display);
    font-size: 32px;
    font-weight: 700;
    letter-spacing: -0.5px;
    margin-bottom: 4px;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    position: relative;
    display: inline-block;
}

.header-title::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 100%;
    height: 3px;
    background: var(--gradient-primary);
    border-radius: 2px;
    opacity: 0.5;
}

.header-subtitle {
    font-size: 12px;
    color: var(--accent-cyan);
    text-transform: uppercase;
    letter-spacing: 2px;
    font-weight: 600;
}

.header-right {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
}

/* Language Toggle */
.lang-toggle {
    display: flex;
    gap: 4px;
    padding: 4px;
    background: rgba(139, 92, 246, 0.1);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: var(--radius-md);
}

.lang-btn {
    padding: 6px 12px;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1px;
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.3s ease;
    font-family: var(--font-mono);
}

.lang-btn.active {
    background: var(--gradient-primary);
    color: var(--text-primary);
    box-shadow: 0 2px 10px rgba(139, 92, 246, 0.4);
}

.lang-btn:hover:not(.active) {
    color: var(--text-primary);
    background: rgba(139, 92, 246, 0.2);
}

.status-indicator {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: rgba(16, 185, 129, 0.15);
    border: 1px solid rgba(16, 185, 129, 0.4);
    border-radius: var(--radius-md);
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.2);
}

.status-dot {
    width: 10px;
    height: 10px;
    background: var(--accent-green);
    border-radius: 50%;
    box-shadow: 0 0 10px var(--accent-green);
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { 
        opacity: 1; 
        transform: scale(1);
        box-shadow: 0 0 10px var(--accent-green);
    }
    50% { 
        opacity: 0.7; 
        transform: scale(0.95);
        box-shadow: 0 0 20px var(--accent-green);
    }
}

.status-text {
    font-size: 12px;
    font-weight: 700;
    color: var(--accent-green);
    letter-spacing: 1.5px;
}

.last-update {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    padding: 8px 16px;
    background: rgba(139, 92, 246, 0.1);
    border: 1px solid rgba(139, 92, 246, 0.3);
    border-radius: var(--radius-md);
}

.update-label {
    font-size: 9px;
    color: var(--accent-primary);
    text-transform: uppercase;
    letter-spacing: 1.2px;
    margin-bottom: 2px;
    font-weight: 600;
}

.update-time {
    font-size: 14px;
    color: var(--text-primary);
    font-weight: 700;
    background: var(--gradient-secondary);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* ============================================
   MAIN CONTENT
   ============================================ */

.main {
    padding: var(--spacing-2xl) 0;
}

.section {
    margin-bottom: var(--spacing-2xl);
}

.section-title {
    font-family: var(--font-display);
    font-size: 24px;
    font-weight: 700;
    margin-bottom: var(--spacing-lg);
    background: var(--gradient-secondary);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    letter-spacing: -0.5px;
    position: relative;
    display: inline-block;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 60px;
    height: 3px;
    background: var(--gradient-primary);
    border-radius: 2px;
}

.layer-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-lg);
}

.layer-number {
    font-size: 11px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: 2px;
    padding: 8px 16px;
    background: var(--gradient-primary);
    border-radius: var(--radius-md);
    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
    position: relative;
    overflow: hidden;
}

.layer-number::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.5s;
}

.layer-number:hover::before {
    left: 100%;
}

/* ============================================
   GRID LAYOUTS
   ============================================ */

.grid {
    display: grid;
    gap: var(--spacing-md);
}

.grid-4 {
    grid-template-columns: repeat(4, 1fr);
}

.grid-3 {
    grid-template-columns: repeat(3, 1fr);
}

.grid-2 {
    grid-template-columns: repeat(2, 1fr);
}

/* ============================================
   CARDS
   ============================================ */

.card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: var(--gradient-primary);
    opacity: 0;
    transition: opacity 0.4s ease;
}

.card::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(139, 92, 246, 0.2), transparent);
    transform: translate(-50%, -50%);
    transition: width 0.6s ease, height 0.6s ease;
}

.card:hover {
    background: var(--bg-card-hover);
    border-color: rgba(139, 92, 246, 0.5);
    transform: translateY(-4px) scale(1.02);
    box-shadow: var(--shadow-glow);
}

.card:hover::before {
    opacity: 1;
}

.card:hover::after {
    width: 300px;
    height: 300px;
}

.card-label {
    font-size: 11px;
    color: var(--accent-cyan);
    text-transform: uppercase;
    letter-spacing: 1.5px;
    margin-bottom: var(--spacing-xs);
    font-weight: 600;
}

.card-value {
    font-size: 36px;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
    font-family: var(--font-display);
    letter-spacing: -1px;
    position: relative;
    z-index: 1;
    text-shadow: 0 2px 10px rgba(139, 92, 246, 0.3);
}

.card-value-small {
    font-size: 18px;
}

.card-value-medium {
    font-size: 24px;
}

.card-meta {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: var(--spacing-xs);
    font-style: italic;
}

.card-wide {
    grid-column: span 2;
}

/* ============================================
   RISK SCORE
   ============================================ */

.risk-score-container {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
}

.risk-score-value {
    font-size: 56px;
    font-weight: 700;
    font-family: var(--font-display);
    line-height: 1;
    letter-spacing: -2px;
    background: var(--gradient-cosmic);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 20px rgba(139, 92, 246, 0.5));
}

.risk-score-bar {
    width: 100%;
    height: 12px;
    background: rgba(148, 163, 184, 0.15);
    border-radius: 6px;
    overflow: hidden;
    position: relative;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

.risk-score-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.1), 
        transparent);
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.risk-score-fill {
    height: 100%;
    width: 0%;
    background: var(--gradient-success);
    transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1), background 0.5s ease;
    border-radius: 6px;
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.6);
    position: relative;
}

.risk-score-fill::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 20px;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3));
    border-radius: 0 6px 6px 0;
}

.risk-score-label {
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 1.5px;
    text-transform: uppercase;
}

/* Risk Score States */
.risk-accumulation { 
    color: var(--accent-green);
    text-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
}
.risk-neutral { 
    color: var(--accent-yellow);
    text-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
}
.risk-overheated { 
    color: var(--accent-red);
    text-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
}

.risk-fill-accumulation { 
    background: var(--gradient-success) !important;
    box-shadow: 0 0 25px rgba(16, 185, 129, 0.7) !important;
}
.risk-fill-neutral { 
    background: var(--gradient-warning) !important;
    box-shadow: 0 0 25px rgba(251, 191, 36, 0.7) !important;
}
.risk-fill-overheated { 
    background: var(--gradient-danger) !important;
    box-shadow: 0 0 25px rgba(239, 68, 68, 0.7) !important;
}

/* ============================================
   INFO CARDS (Placeholder Layers)
   ============================================ */

.info-card {
    background: linear-gradient(135deg, 
        rgba(139, 92, 246, 0.15), 
        rgba(236, 72, 153, 0.15));
    border: 2px solid;
    border-image: var(--gradient-primary) 1;
    border-radius: var(--radius-xl);
    padding: var(--spacing-xl);
    display: flex;
    align-items: flex-start;
    gap: var(--spacing-md);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
    transition: all 0.4s ease;
}

.info-card::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(139, 92, 246, 0.2), transparent 50%);
    pointer-events: none;
    animation: rotate 10s linear infinite;
}

@keyframes rotate {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.info-card::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: var(--gradient-secondary);
    opacity: 0.5;
}

.info-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-glow);
    border-image: linear-gradient(135deg, #8b5cf6, #ec4899, #06b6d4) 1;
}

.info-icon {
    font-size: 42px;
    line-height: 1;
    flex-shrink: 0;
    filter: drop-shadow(0 0 10px rgba(139, 92, 246, 0.6));
    position: relative;
    z-index: 1;
}

.info-content {
    flex: 1;
    position: relative;
    z-index: 1;
}

.info-title {
    font-size: 18px;
    font-weight: 700;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: var(--spacing-xs);
    letter-spacing: -0.3px;
}

.info-description {
    font-size: 13px;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-sm);
    line-height: 1.7;
}

.info-metrics {
    font-size: 11px;
    color: var(--accent-cyan);
    font-style: italic;
    letter-spacing: 0.8px;
    font-weight: 500;
}

/* Data Cards with Live Values */
.data-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-sm);
    margin-top: var(--spacing-md);
}

.data-item {
    padding: var(--spacing-sm);
    background: rgba(139, 92, 246, 0.05);
    border-radius: var(--radius-md);
    border: 1px solid rgba(139, 92, 246, 0.2);
}

.data-item-label {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 4px;
}

.data-item-value {
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    font-family: var(--font-display);
}

.data-item-change {
    font-size: 11px;
    margin-top: 4px;
    font-weight: 600;
}

/* ============================================
   DIVIDERS
   ============================================ */

.divider {
    height: 2px;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(139, 92, 246, 0.5), 
        rgba(236, 72, 153, 0.5), 
        rgba(6, 182, 212, 0.5), 
        transparent);
    margin: var(--spacing-2xl) 0;
    position: relative;
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
}

.divider::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    background: var(--gradient-primary);
    border-radius: 50%;
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.8);
    animation: pulse 2s ease-in-out infinite;
}

.divider::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 16px;
    height: 16px;
    border: 2px solid rgba(139, 92, 246, 0.3);
    border-radius: 50%;
    animation: ripple 2s ease-out infinite;
}

@keyframes ripple {
    0% {
        width: 16px;
        height: 16px;
        opacity: 1;
    }
    100% {
        width: 40px;
        height: 40px;
        opacity: 0;
    }
}

/* ============================================
   FOOTER
   ============================================ */

.footer {
    padding: var(--spacing-xl) 0;
    border-top: 2px solid;
    border-image: var(--gradient-primary) 1;
    margin-top: var(--spacing-2xl);
    background: rgba(15, 3, 38, 0.5);
    backdrop-filter: blur(10px);
}

.footer-text {
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.8;
    margin-bottom: var(--spacing-sm);
}

.footer-text strong {
    background: var(--gradient-warning);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    font-weight: 700;
}

.footer-meta {
    font-size: 11px;
    color: var(--accent-cyan);
    font-style: italic;
    font-weight: 500;
}

/* ============================================
   COLOR UTILITIES
   ============================================ */

.text-green { 
    color: var(--accent-green) !important;
    text-shadow: 0 0 15px rgba(16, 185, 129, 0.5);
}
.text-red { 
    color: var(--accent-red) !important;
    text-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
}
.text-yellow { 
    color: var(--accent-yellow) !important;
    text-shadow: 0 0 15px rgba(251, 191, 36, 0.5);
}
.text-cyan { 
    color: var(--accent-cyan) !important;
    text-shadow: 0 0 15px rgba(6, 182, 212, 0.5);
}
.text-purple { 
    color: var(--accent-primary) !important;
    text-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
}
.text-pink { 
    color: var(--accent-secondary) !important;
    text-shadow: 0 0 15px rgba(236, 72, 153, 0.5);
}

/* ============================================
   ANIMATIONS
   ============================================ */

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.card {
    animation: fadeIn 0.5s ease-out backwards;
}

.card:nth-child(1) { animation-delay: 0.05s; }
.card:nth-child(2) { animation-delay: 0.1s; }
.card:nth-child(3) { animation-delay: 0.15s; }
.card:nth-child(4) { animation-delay: 0.2s; }
.card:nth-child(5) { animation-delay: 0.25s; }
.card:nth-child(6) { animation-delay: 0.3s; }

/* ============================================
   ADVANCED ANALYSIS SECTION
   ============================================ */

.analysis-header {
    text-align: center;
    margin-bottom: var(--spacing-2xl);
    padding: var(--spacing-xl);
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
    border-radius: var(--radius-xl);
    border: 2px solid;
    border-image: var(--gradient-primary) 1;
}

.analysis-badge {
    display: inline-block;
    padding: 8px 20px;
    background: var(--gradient-primary);
    color: var(--text-primary);
    border-radius: var(--radius-md);
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 2px;
    margin-bottom: var(--spacing-sm);
    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
}

.analysis-title {
    font-family: var(--font-display);
    font-size: 36px;
    font-weight: 700;
    background: var(--gradient-cosmic);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: var(--spacing-sm);
    letter-spacing: -1px;
}

.analysis-subtitle {
    font-size: 14px;
    color: var(--text-secondary);
    max-width: 800px;
    margin: 0 auto;
    line-height: 1.7;
}

.analysis-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-2xl);
}

.analysis-card {
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-lg);
    overflow: hidden;
    transition: all 0.3s ease;
    cursor: pointer;
    backdrop-filter: blur(10px);
}

.analysis-card:hover {
    border-color: rgba(139, 92, 246, 0.5);
    box-shadow: var(--shadow-glow);
    transform: translateY(-2px);
}

.analysis-card-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-lg);
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(236, 72, 153, 0.05));
}

.analysis-icon {
    font-size: 32px;
    flex-shrink: 0;
    filter: drop-shadow(0 0 8px rgba(139, 92, 246, 0.5));
}

.analysis-card-title {
    flex: 1;
}

.analysis-card-title h3 {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 4px;
    font-family: var(--font-display);
}

.analysis-card-title p {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.4;
}

.analysis-toggle {
    font-size: 24px;
    color: var(--accent-primary);
    font-weight: 700;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    background: rgba(139, 92, 246, 0.1);
    transition: all 0.3s ease;
}

.analysis-card.active .analysis-toggle {
    transform: rotate(45deg);
    background: var(--gradient-primary);
    color: var(--text-primary);
}

.analysis-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease, padding 0.4s ease;
    padding: 0 var(--spacing-lg);
}

.analysis-card.active .analysis-content {
    max-height: 2000px;
    padding: 0 var(--spacing-lg) var(--spacing-lg);
}

.analysis-text {
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.8;
    margin-bottom: var(--spacing-sm);
}

.analysis-text strong {
    color: var(--text-primary);
    font-weight: 600;
}

.analysis-status {
    margin-bottom: var(--spacing-sm);
}

.status-badge {
    display: inline-block;
    padding: 6px 14px;
    background: var(--gradient-secondary);
    color: var(--text-primary);
    border-radius: var(--radius-sm);
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1px;
}

.analysis-metrics {
    margin-top: var(--spacing-md);
}

.metric-item {
    margin-bottom: var(--spacing-sm);
}

.metric-label {
    display: block;
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 6px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.metric-bar {
    width: 100%;
    height: 8px;
    background: rgba(148, 163, 184, 0.15);
    border-radius: 4px;
    overflow: hidden;
}

.metric-fill {
    height: 100%;
    background: var(--gradient-primary);
    border-radius: 4px;
    transition: width 1s ease;
}

.analysis-insight {
    margin-top: var(--spacing-md);
    padding: var(--spacing-sm);
    background: rgba(6, 182, 212, 0.1);
    border-left: 3px solid var(--accent-cyan);
    border-radius: var(--radius-sm);
    font-size: 12px;
    color: var(--accent-cyan);
    line-height: 1.6;
}

.market-snapshot {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-md);
    padding: var(--spacing-md);
    background: rgba(139, 92, 246, 0.05);
    border-radius: var(--radius-md);
}

.snapshot-item {
    display: flex;
    flex-direction: column;
}

.snapshot-label {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 4px;
}

.snapshot-value {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    font-family: var(--font-display);
}

.liquidity-factors,
.rate-analysis,
.dxy-status,
.stress-indicators,
.etf-metrics,
.deriv-status,
.stablecoin-breakdown,
.onchain-metrics,
.correlation-matrix {
    margin-top: var(--spacing-sm);
}

.factor-item,
.rate-item,
.status-item,
.indicator,
.etf-stat,
.deriv-item,
.stable-item,
.metric-row,
.corr-item {
    padding: var(--spacing-xs) var(--spacing-sm);
    margin-bottom: 6px;
    background: rgba(139, 92, 246, 0.05);
    border-radius: var(--radius-sm);
    font-size: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.rate-value,
.trend-value,
.deriv-val,
.metric-status,
.corr-value {
    font-weight: 600;
    color: var(--accent-cyan);
}

.etf-label,
.etf-value {
    font-size: 11px;
}

.etf-value {
    font-weight: 700;
    color: var(--accent-green);
}

.sentiment-gauge {
    margin-top: var(--spacing-md);
}

.gauge-bar {
    width: 100%;
    height: 10px;
    background: linear-gradient(90deg, var(--accent-green), var(--accent-yellow), var(--accent-red));
    border-radius: 5px;
    margin-bottom: 8px;
}

.gauge-fill {
    height: 100%;
    border-right: 3px solid var(--text-primary);
    transition: width 1s ease;
}

.gauge-labels {
    display: flex;
    justify-content: space-between;
    font-size: 10px;
    color: var(--text-muted);
}

.dom-chart {
    margin-top: var(--spacing-md);
}

.dom-bar {
    width: 100%;
    height: 12px;
    background: rgba(148, 163, 184, 0.15);
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: var(--spacing-sm);
}

.dom-fill {
    height: 100%;
    background: var(--gradient-primary);
    border-radius: 6px;
    transition: width 1s ease;
}

.dom-status {
    font-size: 12px;
    color: var(--text-secondary);
    text-align: center;
}

.evolution-list {
    margin: var(--spacing-sm) 0;
    padding-left: var(--spacing-md);
}

.evolution-list li {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 6px;
    line-height: 1.6;
}

.regime-badge {
    display: inline-block;
    padding: 6px 16px;
    background: var(--gradient-success);
    color: var(--text-primary);
    border-radius: var(--radius-md);
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 1px;
}

.regime-factors {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-xs);
    margin-top: var(--spacing-md);
}

.factor {
    padding: var(--spacing-xs);
    background: rgba(139, 92, 246, 0.05);
    border-radius: var(--radius-sm);
    font-size: 11px;
}

.geo-factors,
.adoption-stats {
    margin-top: var(--spacing-sm);
}

.geo-item,
.stat {
    padding: var(--spacing-xs) var(--spacing-sm);
    margin-bottom: 6px;
    background: rgba(139, 92, 246, 0.05);
    border-radius: var(--radius-sm);
    font-size: 12px;
}

.scenarios {
    margin-top: var(--spacing-md);
}

.scenario-item {
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-radius: var(--radius-md);
    border: 2px solid;
}

.scenario-bull {
    background: rgba(16, 185, 129, 0.05);
    border-color: rgba(16, 185, 129, 0.3);
}

.scenario-neutral {
    background: rgba(251, 191, 36, 0.05);
    border-color: rgba(251, 191, 36, 0.3);
}

.scenario-bear {
    background: rgba(239, 68, 68, 0.05);
    border-color: rgba(239, 68, 68, 0.3);
}

.scenario-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-xs);
}

.scenario-label {
    font-weight: 700;
    font-size: 13px;
}

.scenario-prob {
    font-size: 20px;
    font-weight: 700;
    font-family: var(--font-display);
}

.scenario-text {
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: var(--spacing-xs);
    line-height: 1.6;
}

.scenario-invalid {
    font-size: 11px;
    color: var(--text-muted);
    font-style: italic;
}

.timeline-forecast {
    margin-top: var(--spacing-md);
}

.timeline-item {
    display: flex;
    justify-content: space-between;
    padding: var(--spacing-sm);
    margin-bottom: var(--spacing-xs);
    background: rgba(139, 92, 246, 0.05);
    border-radius: var(--radius-sm);
    border-left: 3px solid var(--accent-primary);
}

.timeline-period {
    font-weight: 700;
    color: var(--accent-primary);
    font-size: 12px;
}

.timeline-event {
    font-size: 12px;
    color: var(--text-secondary);
}

.risk-list {
    margin-top: var(--spacing-md);
}

.risk-item {
    display: flex;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
    border-radius: var(--radius-md);
    background: rgba(139, 92, 246, 0.05);
}

.risk-icon {
    font-size: 20px;
    flex-shrink: 0;
}

.risk-content strong {
    display: block;
    font-size: 13px;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.risk-content p {
    font-size: 11px;
    color: var(--text-secondary);
    line-height: 1.5;
}

.data-sources {
    margin-top: var(--spacing-md);
}

.source-item {
    padding: var(--spacing-xs) var(--spacing-sm);
    margin-bottom: 6px;
    background: rgba(139, 92, 246, 0.05);
    border-radius: var(--radius-sm);
    font-size: 12px;
}

.update-status {
    margin-top: var(--spacing-md);
    padding: var(--spacing-sm);
    background: rgba(16, 185, 129, 0.1);
    border-radius: var(--radius-sm);
    font-size: 12px;
    color: var(--accent-green);
    text-align: center;
    font-weight: 600;
}

.analysis-summary {
    padding: var(--spacing-2xl);
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
    border-radius: var(--radius-xl);
    border: 2px solid;
    border-image: var(--gradient-cosmic) 1;
    margin-top: var(--spacing-2xl);
}

.summary-title {
    font-family: var(--font-display);
    font-size: 28px;
    font-weight: 700;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    text-align: center;
    margin-bottom: var(--spacing-lg);
}

.summary-content {
    max-width: 900px;
    margin: 0 auto;
}

.summary-text {
    font-size: 15px;
    color: var(--text-secondary);
    line-height: 1.8;
    margin-bottom: var(--spacing-xl);
    text-align: center;
}

.summary-text strong {
    color: var(--text-primary);
    font-weight: 700;
}

.outlook-boxes {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-md);
}

.outlook-box {
    padding: var(--spacing-lg);
    border-radius: var(--radius-md);
    border: 2px solid;
}

.outlook-short {
    background: rgba(6, 182, 212, 0.05);
    border-color: rgba(6, 182, 212, 0.3);
}

.outlook-medium {
    background: rgba(16, 185, 129, 0.05);
    border-color: rgba(16, 185, 129, 0.3);
}

.outlook-long {
    background: rgba(139, 92, 246, 0.05);
    border-color: rgba(139, 92, 246, 0.3);
}

.outlook-box h4 {
    font-size: 14px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: var(--spacing-sm);
    font-family: var(--font-display);
}

.outlook-box p {
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.6;
}

/* ============================================
   RESPONSIVE DESIGN
   ============================================ */

/* Tablet */
@media (max-width: 1024px) {
    .grid-4 {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .grid-3 {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .card-wide {
        grid-column: span 2;
    }
    
    .header-title {
        font-size: 26px;
    }
    
    .section-title {
        font-size: 20px;
    }
    
    .analysis-grid {
        grid-template-columns: 1fr;
    }
    
    .outlook-boxes {
        grid-template-columns: 1fr;
    }
    
    .market-snapshot,
    .data-grid {
        grid-template-columns: 1fr;
    }
    
    .analysis-title {
        font-size: 28px;
    }
    
    .regime-factors {
        grid-template-columns: 1fr;
    }
}

/* Mobile */
@media (max-width: 640px) {
    .grid-4,
    .grid-3,
    .grid-2 {
        grid-template-columns: 1fr;
    }
    
    .card-wide {
        grid-column: span 1;
    }
    
    .header-content {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-sm);
    }
    
    .header-right {
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
    }
    
    .header-title {
        font-size: 24px;
    }
    
    .section-title {
        font-size: 18px;
    }
    
    .card-value {
        font-size: 30px;
    }
    
    .risk-score-value {
        font-size: 48px;
    }
    
    .main {
        padding: var(--spacing-xl) 0;
    }
    
    .section {
        margin-bottom: var(--spacing-xl);
    }
    
    .divider {
        margin: var(--spacing-xl) 0;
    }
    
    .info-card {
        flex-direction: column;
        text-align: center;
        padding: var(--spacing-lg);
    }
    
    .layer-number {
        font-size: 10px;
        padding: 6px 12px;
    }
    
    .status-indicator,
    .last-update {
        font-size: 11px;
    }
    
    .analysis-header {
        padding: var(--spacing-md);
    }
    
    .analysis-title {
        font-size: 24px;
    }
    
    .analysis-subtitle {
        font-size: 12px;
    }
    
    .analysis-card-title h3 {
        font-size: 14px;
    }
    
    .analysis-card-title p {
        font-size: 11px;
    }
    
    .summary-title {
        font-size: 22px;
    }
    
    .analysis-summary {
        padding: var(--spacing-lg);
    }
}

/* Small Mobile */
@media (max-width: 400px) {
    .container {
        padding: 0 var(--spacing-sm);
    }
    
    .card {
        padding: var(--spacing-md);
    }
    
    .card-value {
        font-size: 26px;
    }
    
    .header-title {
        font-size: 20px;
    }
    
    .risk-score-value {
        font-size: 40px;
    }
}
    </style>
</head>
<body>
    <!-- Floating Particles Background -->
    <div class="particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="header-title" data-i18n="header.title">Bitcoin Intelligence Dashboard</h1>
                    <p class="header-subtitle" data-i18n="header.subtitle">Multi-Layer Market Framework</p>
                </div>
                <div class="header-right">
                    <!-- Language Toggle -->
                    <div class="lang-toggle">
                        <button class="lang-btn active" onclick="setLanguage('en')">EN</button>
                        <button class="lang-btn" onclick="setLanguage('id')">ID</button>
                    </div>
                    
                    <div class="status-indicator">
                        <span class="status-dot"></span>
                        <span class="status-text" data-i18n="header.live">LIVE</span>
                    </div>
                    <div class="last-update">
                        <span class="update-label" data-i18n="header.lastUpdate">Last Update</span>
                        <span class="update-time" id="lastUpdate">--:--:--</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            
            <!-- Live Market Overview -->
            <section class="section">
                <h2 class="section-title" data-i18n="market.title">Live Market Overview</h2>
                <div class="grid grid-4">
                    <div class="card">
                        <div class="card-label" data-i18n="market.price">Price (USD)</div>
                        <div class="card-value" id="btcPrice">$--,---</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="market.change24h">24h Change</div>
                        <div class="card-value" id="priceChange24h">--%</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="market.marketCap">Market Cap</div>
                        <div class="card-value" id="marketCap">$---B</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="market.volume24h">24h Volume</div>
                        <div class="card-value" id="volume24h">$---B</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="market.supply">Circulating Supply</div>
                        <div class="card-value" id="circulatingSupply">--- BTC</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="market.dominance">BTC Dominance</div>
                        <div class="card-value" id="btcDominance">--%</div>
                    </div>
                </div>
            </section>

            <div class="divider"></div>

            <!-- Layer 1: Price & Cycle -->
            <section class="section">
                <div class="layer-header">
                    <span class="layer-number">LAYER 01</span>
                    <h2 class="section-title" data-i18n="layer1.title">Price & Cycle Analysis</h2>
                </div>
                <div class="grid grid-3">
                    <div class="card">
                        <div class="card-label" data-i18n="layer1.currentPrice">Current Price</div>
                        <div class="card-value" id="currentPrice">$--,---</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer1.ath">All-Time High</div>
                        <div class="card-value" id="athPrice">$--,---</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer1.fromATH">% From ATH</div>
                        <div class="card-value" id="percentFromATH">--%</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer1.halving">Days Since Halving</div>
                        <div class="card-value" id="daysSinceHalving">---</div>
                        <div class="card-meta">Last: April 20, 2024</div>
                    </div>
                    <div class="card card-wide">
                        <div class="card-label" data-i18n="layer1.riskScore">Composite Risk Score</div>
                        <div class="risk-score-container">
                            <div class="risk-score-value" id="riskScore">--</div>
                            <div class="risk-score-bar">
                                <div class="risk-score-fill" id="riskScoreFill"></div>
                            </div>
                            <div class="risk-score-label" id="riskScoreLabel">---</div>
                        </div>
                    </div>
                </div>
            </section>

            <div class="divider"></div>

            <!-- Layer 2: On-Chain Metrics -->
            <section class="section">
                <div class="layer-header">
                    <span class="layer-number">LAYER 02</span>
                    <h2 class="section-title" data-i18n="layer2.title">On-Chain Metrics</h2>
                </div>
                <div class="grid grid-3">
                    <div class="card">
                        <div class="card-label" data-i18n="layer2.hashRate">Hash Rate</div>
                        <div class="card-value card-value-medium" id="hashRate">--- EH/s</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer2.difficulty">Mining Difficulty</div>
                        <div class="card-value card-value-small" id="difficulty">--- T</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer2.transactions">Transactions (24h)</div>
                        <div class="card-value card-value-medium" id="transactions24h">---K</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer2.mempool">Mempool Size</div>
                        <div class="card-value card-value-medium" id="mempoolSize">--- MB</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer2.blockSize">Avg Block Size</div>
                        <div class="card-value card-value-medium" id="avgBlockSize">--- MB</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer2.blockTime">Avg Block Time</div>
                        <div class="card-value card-value-medium" id="avgBlockTime">--- min</div>
                    </div>
                </div>
            </section>

            <div class="divider"></div>

            <!-- Layer 3: Macro Liquidity -->
            <section class="section">
                <div class="layer-header">
                    <span class="layer-number">LAYER 03</span>
                    <h2 class="section-title" data-i18n="layer3.title">Macro Liquidity</h2>
                </div>
                <div class="grid grid-3">
                    <div class="card">
                        <div class="card-label" data-i18n="layer3.dxy">DXY (US Dollar Index)</div>
                        <div class="card-value card-value-medium" id="dxyValue">---</div>
                        <div class="card-meta" id="dxyChange">--</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer3.sp500">S&P 500</div>
                        <div class="card-value card-value-medium" id="sp500Value">---</div>
                        <div class="card-meta" id="sp500Change">--</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer3.gold">Gold Price</div>
                        <div class="card-value card-value-medium" id="goldValue">$---</div>
                        <div class="card-meta" id="goldChange">--</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer3.fedRate">Fed Funds Rate</div>
                        <div class="card-value card-value-medium" id="fedRate">---%</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer3.treasury10y">10Y Treasury Yield</div>
                        <div class="card-value card-value-medium" id="treasury10y">---%</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer3.inflation">US Inflation (CPI)</div>
                        <div class="card-value card-value-medium" id="cpiValue">---%</div>
                    </div>
                </div>
            </section>

            <div class="divider"></div>

            <!-- Layer 4: Institutional Flow -->
            <section class="section">
                <div class="layer-header">
                    <span class="layer-number">LAYER 04</span>
                    <h2 class="section-title" data-i18n="layer4.title">Institutional Flow</h2>
                </div>
                <div class="info-card">
                    <div class="info-icon">üèõÔ∏è</div>
                    <div class="info-content">
                        <div class="info-title" data-i18n="layer4.etfTitle">ETF & Institutional Flow Integration Ready</div>
                        <div class="info-description" data-i18n="layer4.etfDesc">Bitcoin ETF flows and institutional exposure tracking</div>
                        <div class="info-metrics">Spot ETF Inflows ¬∑ Futures Open Interest ¬∑ Institutional Holdings</div>
                    </div>
                </div>
            </section>

            <div class="divider"></div>

            <!-- Layer 5: Stablecoin Liquidity -->
            <section class="section">
                <div class="layer-header">
                    <span class="layer-number">LAYER 05</span>
                    <h2 class="section-title" data-i18n="layer5.title">Stablecoin Liquidity</h2>
                </div>
                <div class="grid grid-3">
                    <div class="card">
                        <div class="card-label" data-i18n="layer5.usdt">USDT Market Cap</div>
                        <div class="card-value" id="usdtMarketCap">$---B</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer5.usdc">USDC Market Cap</div>
                        <div class="card-value" id="usdcMarketCap">$---B</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer5.total">Total Stablecoin Cap</div>
                        <div class="card-value" id="totalStablecoinCap">$---B</div>
                    </div>
                </div>
            </section>

            <div class="divider"></div>

            <!-- Layer 6: Derivatives -->
            <section class="section">
                <div class="layer-header">
                    <span class="layer-number">LAYER 06</span>
                    <h2 class="section-title" data-i18n="layer6.title">Derivatives Market</h2>
                </div>
                <div class="grid grid-3">
                    <div class="card">
                        <div class="card-label" data-i18n="layer6.funding">Funding Rate</div>
                        <div class="card-value card-value-medium" id="fundingRate">---%</div>
                        <div class="card-meta" id="fundingStatus">---</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer6.openInterest">Open Interest</div>
                        <div class="card-value card-value-medium" id="openInterest">$---B</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer6.longShort">Long/Short Ratio</div>
                        <div class="card-value card-value-medium" id="longShortRatio">---</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer6.volume24h">24h Derivatives Volume</div>
                        <div class="card-value card-value-medium" id="derivVolume">$---B</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer6.liquidations">24h Liquidations</div>
                        <div class="card-value card-value-medium" id="liquidations24h">$---M</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer6.oiChange">OI Change (24h)</div>
                        <div class="card-value card-value-medium" id="oiChange24h">---%</div>
                    </div>
                </div>
            </section>

            <div class="divider"></div>

            <!-- Layer 7: Sentiment -->
            <section class="section">
                <div class="layer-header">
                    <span class="layer-number">LAYER 07</span>
                    <h2 class="section-title" data-i18n="layer7.title">Market Sentiment</h2>
                </div>
                <div class="grid grid-3">
                    <div class="card">
                        <div class="card-label" data-i18n="layer7.fearGreed">Fear & Greed Index</div>
                        <div class="card-value" id="fearGreedValue">--</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer7.classification">Classification</div>
                        <div class="card-value" id="fearGreedClass">---</div>
                    </div>
                    <div class="card">
                        <div class="card-label" data-i18n="layer7.interpretation">Interpretation</div>
                        <div class="card-value card-value-small" id="fearGreedInterpretation">---</div>
                    </div>
                </div>
            </section>

            <div class="divider"></div>

            <!-- Advanced Cycle & Macro Analysis Framework -->
            <section class="section">
                <div class="analysis-header">
                    <div class="analysis-badge">üéØ <span data-i18n="analysis.badge">ADVANCED ANALYSIS</span></div>
                    <h2 class="analysis-title" data-i18n="analysis.title">Bitcoin Cycle & Macro Framework</h2>
                    <p class="analysis-subtitle" data-i18n="analysis.subtitle">Comprehensive multi-factor analysis integrating on-chain, derivatives, liquidity & macroeconomic indicators</p>
                </div>

                <!-- Analysis Grid -->
                <div class="analysis-grid">
                    
                    <!-- Category 1: Market Cycle Structure -->
                    <div class="analysis-card" onclick="toggleAnalysis(this)">
                        <div class="analysis-card-header">
                            <div class="analysis-icon">üìä</div>
                            <div class="analysis-card-title">
                                <h3 data-i18n="analysis.cycle.title">Market Cycle Structure</h3>
                                <p data-i18n="analysis.cycle.desc">Current phase identification & historical comparison</p>
                            </div>
                            <div class="analysis-toggle">+</div>
                        </div>
                        <div class="analysis-content">
                            <div class="analysis-status" id="cyclePhase">
                                <span class="status-badge">ANALYZING...</span>
                            </div>
                            <p class="analysis-text" id="cycleAnalysis">
                                <span data-i18n="analysis.cycle.text1">Based on real-time data, we are currently in the</span> <strong id="currentPhase">--</strong> <span data-i18n="analysis.cycle.text2">phase. Historical cycle patterns suggest</span> <span id="cycleComparison">--</span>. 
                                <span data-i18n="analysis.cycle.text3">Key difference from previous cycles:</span> <span id="cycleDifference">--</span>.
                            </p>
                            <div class="analysis-metrics">
                                <div class="metric-item">
                                    <span class="metric-label" data-i18n="analysis.cycle.progress">Cycle Progress</span>
                                    <div class="metric-bar">
                                        <div class="metric-fill" id="cycleProgress" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Scenarios -->
                    <div class="analysis-card" onclick="toggleAnalysis(this)">
                        <div class="analysis-card-header">
                            <div class="analysis-icon">üé≤</div>
                            <div class="analysis-card-title">
                                <h3 data-i18n="analysis.scenarios.title">Probabilistic Scenarios</h3>
                                <p data-i18n="analysis.scenarios.desc">Bull, sideways & bear case probabilities</p>
                            </div>
                            <div class="analysis-toggle">+</div>
                        </div>
                        <div class="analysis-content">
                            <div class="scenarios">
                                <div class="scenario-item scenario-bull">
                                    <div class="scenario-header">
                                        <span class="scenario-label">üü¢ <span data-i18n="analysis.scenarios.bull">Bullish Continuation</span></span>
                                        <span class="scenario-prob" id="bullProb">60%</span>
                                    </div>
                                    <p class="scenario-text" data-i18n="analysis.scenarios.bullText">ETF demand + rate cuts + halving supply shock drives continuation to $120k-$150k by Q4 2025</p>
                                    <p class="scenario-invalid"><strong data-i18n="analysis.scenarios.invalid">Invalidation:</strong> <span data-i18n="analysis.scenarios.bullInvalid">Break below $70k with rising DXY</span></p>
                                </div>
                                <div class="scenario-item scenario-neutral">
                                    <div class="scenario-header">
                                        <span class="scenario-label">üü° <span data-i18n="analysis.scenarios.neutral">Extended Consolidation</span></span>
                                        <span class="scenario-prob" id="neutralProb">30%</span>
                                    </div>
                                    <p class="scenario-text" data-i18n="analysis.scenarios.neutralText">Range-bound $80k-$110k for 6-12 months as market digests supply, volatility compression</p>
                                    <p class="scenario-invalid"><strong data-i18n="analysis.scenarios.invalid">Invalidation:</strong> <span data-i18n="analysis.scenarios.neutralInvalid">Break above $110k or below $75k</span></p>
                                </div>
                                <div class="scenario-item scenario-bear">
                                    <div class="scenario-header">
                                        <span class="scenario-label">üî¥ <span data-i18n="analysis.scenarios.bear">Early Bear Market</span></span>
                                        <span class="scenario-prob" id="bearProb">10%</span>
                                    </div>
                                    <p class="scenario-text" data-i18n="analysis.scenarios.bearText">Macro shock (credit event, liquidity crisis) triggers early cycle top, retest $50k-$60k</p>
                                    <p class="scenario-invalid"><strong data-i18n="analysis.scenarios.invalid">Invalidation:</strong> <span data-i18n="analysis.scenarios.bearInvalid">Sustained hold above $100k</span></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Summary placeholder -->
                    <div class="analysis-card" onclick="toggleAnalysis(this)">
                        <div class="analysis-card-header">
                            <div class="analysis-icon">üì°</div>
                            <div class="analysis-card-title">
                                <h3 data-i18n="analysis.data.title">Real-Time Data Integration</h3>
                                <p data-i18n="analysis.data.desc">Live data sources & update frequency</p>
                            </div>
                            <div class="analysis-toggle">+</div>
                        </div>
                        <div class="analysis-content">
                            <p class="analysis-text">
                                <strong data-i18n="analysis.data.sources">Data Sources:</strong> <span data-i18n="analysis.data.text">This analysis integrates real-time data from multiple sources:</span>
                            </p>
                            <div class="data-sources">
                                <div class="source-item">‚úÖ CoinGecko API (Price, volume, market cap)</div>
                                <div class="source-item">‚úÖ Fear & Greed Index (Sentiment)</div>
                                <div class="source-item">‚úÖ Binance API (Derivatives data - FREE)</div>
                                <div class="source-item">‚úÖ Blockchain.info (On-chain data - FREE)</div>
                                <div class="source-item">‚úÖ Alpha Vantage (Macro data - FREE)</div>
                                <div class="source-item">‚úÖ Stablecoin on-chain data</div>
                            </div>
                            <p class="update-status">üîÑ <span data-i18n="analysis.data.refresh">Auto-refresh: Every 60 seconds</span></p>
                        </div>
                    </div>

                </div>

                <!-- Summary & Outlook -->
                <div class="analysis-summary">
                    <h3 class="summary-title">üìä <span data-i18n="analysis.summary.title">Synthesis & Market Outlook</span></h3>
                    <div class="summary-content">
                        <p class="summary-text" id="marketSummary">
                            <span data-i18n="analysis.summary.text1">Based on comprehensive multi-factor analysis, Bitcoin appears to be in a</span> <strong id="summaryPhase">mid-cycle accumulation phase</strong>. 
                            <span data-i18n="analysis.summary.text2">The convergence of supply dynamics (post-halving), institutional demand (ETF flows), and improving macro conditions (rate cuts expected) supports a</span> <strong id="summaryBias">constructive medium-term outlook</strong>. 
                        </p>
                        <div class="outlook-boxes">
                            <div class="outlook-box outlook-short">
                                <h4 data-i18n="analysis.outlook.short">Short-Term (1-3 months)</h4>
                                <p id="outlookShort">Range consolidation likely, volatility compression, watch for breakout above key resistance</p>
                            </div>
                            <div class="outlook-box outlook-medium">
                                <h4 data-i18n="analysis.outlook.medium">Medium-Term (3-12 months)</h4>
                                <p id="outlookMedium">Bullish bias supported by ETF demand, halving supply reduction, and expected monetary easing</p>
                            </div>
                            <div class="outlook-box outlook-long">
                                <h4 data-i18n="analysis.outlook.long">Long-Term (12+ months)</h4>
                                <p id="outlookLong">Cycle peak expected Q4 2025 - Q1 2026, followed by distribution phase and eventual correction</p>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="footer-text">
                <strong data-i18n="footer.warning">Educational Purposes Only.</strong> <span data-i18n="footer.disclaimer">This dashboard aggregates public market data for research and analysis. Not financial advice. Cryptocurrency investments carry significant risk. Always conduct your own research and consult with qualified financial advisors.</span>
            </p>
            <p class="footer-meta">
                <span data-i18n="footer.sources">Data Sources:</span> CoinGecko API ¬∑ Alternative.me ¬∑ Binance API ¬∑ Blockchain.info ¬∑ Alpha Vantage
            </p>
        </div>
    </footer>

    <script>
// ============================================
// BITCOIN INTELLIGENCE DASHBOARD
// Live Data Integration & Multi-Language Support
// ============================================

// Global state
const state = {
    btcData: null,
    globalData: null,
    stablecoins: {},
    fearGreed: null,
    onChainData: null,
    macroData: {},
    derivativesData: {},
    lastUpdate: null,
    currentLang: 'en'
};

// Constants
const HALVING_DATE = new Date('2024-04-20');
const UPDATE_INTERVAL = 60000; // 60 seconds
const ANIMATION_DURATION = 1000;

// ============================================
// MULTI-LANGUAGE SUPPORT
// ============================================

const translations = {
    en: {
        header: {
            title: "Bitcoin Intelligence Dashboard",
            subtitle: "Multi-Layer Market Framework",
            live: "LIVE",
            lastUpdate: "Last Update"
        },
        market: {
            title: "Live Market Overview",
            price: "Price (USD)",
            change24h: "24h Change",
            marketCap: "Market Cap",
            volume24h: "24h Volume",
            supply: "Circulating Supply",
            dominance: "BTC Dominance"
        },
        layer1: {
            title: "Price & Cycle Analysis",
            currentPrice: "Current Price",
            ath: "All-Time High",
            fromATH: "% From ATH",
            halving: "Days Since Halving",
            riskScore: "Composite Risk Score"
        },
        layer2: {
            title: "On-Chain Metrics",
            hashRate: "Hash Rate",
            difficulty: "Mining Difficulty",
            transactions: "Transactions (24h)",
            mempool: "Mempool Size",
            blockSize: "Avg Block Size",
            blockTime: "Avg Block Time"
        },
        layer3: {
            title: "Macro Liquidity",
            dxy: "DXY (US Dollar Index)",
            sp500: "S&P 500",
            gold: "Gold Price",
            fedRate: "Fed Funds Rate",
            treasury10y: "10Y Treasury Yield",
            inflation: "US Inflation (CPI)"
        },
        layer4: {
            title: "Institutional Flow",
            etfTitle: "ETF & Institutional Flow Integration Ready",
            etfDesc: "Bitcoin ETF flows and institutional exposure tracking"
        },
        layer5: {
            title: "Stablecoin Liquidity",
            usdt: "USDT Market Cap",
            usdc: "USDC Market Cap",
            total: "Total Stablecoin Cap"
        },
        layer6: {
            title: "Derivatives Market",
            funding: "Funding Rate",
            openInterest: "Open Interest",
            longShort: "Long/Short Ratio",
            volume24h: "24h Derivatives Volume",
            liquidations: "24h Liquidations",
            oiChange: "OI Change (24h)"
        },
        layer7: {
            title: "Market Sentiment",
            fearGreed: "Fear & Greed Index",
            classification: "Classification",
            interpretation: "Interpretation"
        },
        analysis: {
            badge: "ADVANCED ANALYSIS",
            title: "Bitcoin Cycle & Macro Framework",
            subtitle: "Comprehensive multi-factor analysis integrating on-chain, derivatives, liquidity & macroeconomic indicators",
            cycle: {
                title: "Market Cycle Structure",
                desc: "Current phase identification & historical comparison",
                text1: "Based on real-time data, we are currently in the",
                text2: "phase. Historical cycle patterns suggest",
                text3: "Key difference from previous cycles:",
                progress: "Cycle Progress"
            },
            scenarios: {
                title: "Probabilistic Scenarios",
                desc: "Bull, sideways & bear case probabilities",
                bull: "Bullish Continuation",
                neutral: "Extended Consolidation",
                bear: "Early Bear Market",
                invalid: "Invalidation:",
                bullText: "ETF demand + rate cuts + halving supply shock drives continuation to $120k-$150k by Q4 2025",
                neutralText: "Range-bound $80k-$110k for 6-12 months as market digests supply, volatility compression",
                bearText: "Macro shock (credit event, liquidity crisis) triggers early cycle top, retest $50k-$60k",
                bullInvalid: "Break below $70k with rising DXY",
                neutralInvalid: "Break above $110k or below $75k",
                bearInvalid: "Sustained hold above $100k"
            },
            data: {
                title: "Real-Time Data Integration",
                desc: "Live data sources & update frequency",
                sources: "Data Sources:",
                text: "This analysis integrates real-time data from multiple sources:",
                refresh: "Auto-refresh: Every 60 seconds"
            },
            summary: {
                title: "Synthesis & Market Outlook",
                text1: "Based on comprehensive multi-factor analysis, Bitcoin appears to be in a",
                text2: "The convergence of supply dynamics (post-halving), institutional demand (ETF flows), and improving macro conditions (rate cuts expected) supports a"
            },
            outlook: {
                short: "Short-Term (1-3 months)",
                medium: "Medium-Term (3-12 months)",
                long: "Long-Term (12+ months)"
            }
        },
        footer: {
            warning: "Educational Purposes Only.",
            disclaimer: "This dashboard aggregates public market data for research and analysis. Not financial advice. Cryptocurrency investments carry significant risk. Always conduct your own research and consult with qualified financial advisors.",
            sources: "Data Sources:"
        }
    },
    id: {
        header: {
            title: "Dashboard Intelijen Bitcoin",
            subtitle: "Kerangka Pasar Multi-Layer",
            live: "LANGSUNG",
            lastUpdate: "Pembaruan Terakhir"
        },
        market: {
            title: "Ikhtisar Pasar Langsung",
            price: "Harga (USD)",
            change24h: "Perubahan 24j",
            marketCap: "Kapitalisasi Pasar",
            volume24h: "Volume 24j",
            supply: "Pasokan Beredar",
            dominance: "Dominasi BTC"
        },
        layer1: {
            title: "Analisis Harga & Siklus",
            currentPrice: "Harga Saat Ini",
            ath: "Tertinggi Sepanjang Masa",
            fromATH: "% dari ATH",
            halving: "Hari Sejak Halving",
            riskScore: "Skor Risiko Komposit"
        },
        layer2: {
            title: "Metrik On-Chain",
            hashRate: "Hash Rate",
            difficulty: "Kesulitan Mining",
            transactions: "Transaksi (24j)",
            mempool: "Ukuran Mempool",
            blockSize: "Ukuran Blok Rata-rata",
            blockTime: "Waktu Blok Rata-rata"
        },
        layer3: {
            title: "Likuiditas Makro",
            dxy: "DXY (Indeks Dolar AS)",
            sp500: "S&P 500",
            gold: "Harga Emas",
            fedRate: "Suku Bunga Fed",
            treasury10y: "Yield Treasury 10Y",
            inflation: "Inflasi AS (CPI)"
        },
        layer4: {
            title: "Aliran Institusional",
            etfTitle: "Integrasi Aliran ETF & Institusional Siap",
            etfDesc: "Pelacakan aliran ETF Bitcoin dan eksposur institusional"
        },
        layer5: {
            title: "Likuiditas Stablecoin",
            usdt: "Kapitalisasi Pasar USDT",
            usdc: "Kapitalisasi Pasar USDC",
            total: "Total Kap Stablecoin"
        },
        layer6: {
            title: "Pasar Derivatif",
            funding: "Funding Rate",
            openInterest: "Open Interest",
            longShort: "Rasio Long/Short",
            volume24h: "Volume Derivatif 24j",
            liquidations: "Likuidasi 24j",
            oiChange: "Perubahan OI (24j)"
        },
        layer7: {
            title: "Sentimen Pasar",
            fearGreed: "Indeks Takut & Serakah",
            classification: "Klasifikasi",
            interpretation: "Interpretasi"
        },
        analysis: {
            badge: "ANALISIS LANJUTAN",
            title: "Kerangka Siklus Bitcoin & Makro",
            subtitle: "Analisis multi-faktor komprehensif mengintegrasikan indikator on-chain, derivatif, likuiditas & makroekonomi",
            cycle: {
                title: "Struktur Siklus Pasar",
                desc: "Identifikasi fase saat ini & perbandingan historis",
                text1: "Berdasarkan data real-time, saat ini kita berada di fase",
                text2: "Pola siklus historis menunjukkan",
                text3: "Perbedaan utama dari siklus sebelumnya:",
                progress: "Progres Siklus"
            },
            scenarios: {
                title: "Skenario Probabilistik",
                desc: "Probabilitas kasus bullish, sideways & bearish",
                bull: "Kelanjutan Bullish",
                neutral: "Konsolidasi Diperpanjang",
                bear: "Pasar Bear Awal",
                invalid: "Pembatalan:",
                bullText: "Permintaan ETF + pemotongan suku bunga + kejutan pasokan halving mendorong kelanjutan ke $120k-$150k pada Q4 2025",
                neutralText: "Range $80k-$110k selama 6-12 bulan saat pasar mencerna pasokan, kompresi volatilitas",
                bearText: "Kejutan makro (peristiwa kredit, krisis likuiditas) memicu puncak siklus awal, retest $50k-$60k",
                bullInvalid: "Tembus di bawah $70k dengan DXY naik",
                neutralInvalid: "Tembus di atas $110k atau di bawah $75k",
                bearInvalid: "Bertahan di atas $100k"
            },
            data: {
                title: "Integrasi Data Real-Time",
                desc: "Sumber data langsung & frekuensi update",
                sources: "Sumber Data:",
                text: "Analisis ini mengintegrasikan data real-time dari berbagai sumber:",
                refresh: "Auto-refresh: Setiap 60 detik"
            },
            summary: {
                title: "Sintesis & Outlook Pasar",
                text1: "Berdasarkan analisis multi-faktor komprehensif, Bitcoin tampaknya berada dalam fase",
                text2: "Konvergensi dinamika pasokan (pasca-halving), permintaan institusional (aliran ETF), dan perbaikan kondisi makro (pemotongan suku bunga diharapkan) mendukung"
            },
            outlook: {
                short: "Jangka Pendek (1-3 bulan)",
                medium: "Jangka Menengah (3-12 bulan)",
                long: "Jangka Panjang (12+ bulan)"
            }
        },
        footer: {
            warning: "Hanya untuk Tujuan Edukasi.",
            disclaimer: "Dashboard ini mengagregasi data pasar publik untuk penelitian dan analisis. Bukan nasihat keuangan. Investasi cryptocurrency memiliki risiko signifikan. Selalu lakukan riset sendiri dan konsultasi dengan penasihat keuangan yang berkualifikasi.",
            sources: "Sumber Data:"
        }
    }
};

/**
 * Set language
 */
function setLanguage(lang) {
    state.currentLang = lang;
    
    // Update active button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // Update all translatable elements
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const keys = element.getAttribute('data-i18n').split('.');
        let value = translations[lang];
        
        for (const key of keys) {
            value = value[key];
        }
        
        if (value) {
            element.textContent = value;
        }
    });
}

// ============================================
// API FETCH FUNCTIONS
// ============================================

/**
 * Fetch Bitcoin data from CoinGecko
 */
async function fetchBitcoinData() {
    try {
        const response = await fetch('https://api.coingecko.com/api/v3/coins/bitcoin');
        if (!response.ok) throw new Error('Bitcoin API request failed');
        return await response.json();
    } catch (error) {
        console.error('Error fetching Bitcoin data:', error);
        return null;
    }
}

/**
 * Fetch global crypto market data from CoinGecko
 */
async function fetchGlobalData() {
    try {
        const response = await fetch('https://api.coingecko.com/api/v3/global');
        if (!response.ok) throw new Error('Global API request failed');
        return await response.json();
    } catch (error) {
        console.error('Error fetching global data:', error);
        return null;
    }
}

/**
 * Fetch stablecoin data (USDT and USDC)
 */
async function fetchStablecoinData() {
    try {
        const [usdtResponse, usdcResponse] = await Promise.all([
            fetch('https://api.coingecko.com/api/v3/coins/tether'),
            fetch('https://api.coingecko.com/api/v3/coins/usd-coin')
        ]);
        
        if (!usdtResponse.ok || !usdcResponse.ok) {
            throw new Error('Stablecoin API request failed');
        }
        
        const usdt = await usdtResponse.json();
        const usdc = await usdcResponse.json();
        
        return {
            usdt: usdt.market_data?.market_cap?.usd || 0,
            usdc: usdc.market_data?.market_cap?.usd || 0
        };
    } catch (error) {
        console.error('Error fetching stablecoin data:', error);
        return { usdt: 0, usdc: 0 };
    }
}

/**
 * Fetch Fear & Greed Index
 */
async function fetchFearGreedIndex() {
    try {
        const response = await fetch('https://api.alternative.me/fng/');
        if (!response.ok) throw new Error('Fear & Greed API request failed');
        const data = await response.json();
        return data.data?.[0] || null;
    } catch (error) {
        console.error('Error fetching Fear & Greed Index:', error);
        return null;
    }
}

/**
 * Fetch On-Chain Data from Blockchain.info (FREE)
 */
async function fetchOnChainData() {
    try {
        const response = await fetch('https://blockchain.info/stats?format=json');
        if (!response.ok) throw new Error('On-chain API request failed');
        return await response.json();
    } catch (error) {
        console.error('Error fetching on-chain data:', error);
        return null;
    }
}

/**
 * Fetch Binance Derivatives Data (FREE)
 */
async function fetchDerivativesData() {
    try {
        // Funding rate
        const fundingResponse = await fetch('https://fapi.binance.com/fapi/v1/premiumIndex?symbol=BTCUSDT');
        const funding = await fundingResponse.json();
        
        // Open Interest
        const oiResponse = await fetch('https://fapi.binance.com/fapi/v1/openInterest?symbol=BTCUSDT');
        const oi = await oiResponse.json();
        
        // Long/Short Ratio
        const lsResponse = await fetch('https://fapi.binance.com/futures/data/globalLongShortAccountRatio?symbol=BTCUSDT&period=5m&limit=1');
        const ls = await lsResponse.json();
        
        // 24h Volume
        const tickerResponse = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=BTCUSDT');
        const ticker = await tickerResponse.json();
        
        return {
            fundingRate: parseFloat(funding.lastFundingRate) * 100,
            openInterest: parseFloat(oi.openInterest) * parseFloat(funding.markPrice),
            longShortRatio: ls[0] ? parseFloat(ls[0].longShortRatio) : 1,
            volume24h: parseFloat(ticker.quoteVolume),
            priceChange: parseFloat(ticker.priceChangePercent)
        };
    } catch (error) {
        console.error('Error fetching derivatives data:', error);
        return null;
    }
}

/**
 * Fetch Macro Data from Alpha Vantage (FREE - limited calls)
 * Note: You'd need an API key for production use
 */
async function fetchMacroData() {
    try {
        // This is a placeholder - Alpha Vantage requires API key
        // For demo purposes, using static/estimated values
        return {
            dxy: 104.5,
            dxyChange: -0.3,
            sp500: 5800,
            sp500Change: 0.5,
            gold: 2650,
            goldChange: 0.8,
            fedRate: 4.375,
            treasury10y: 4.5,
            cpi: 3.2
        };
    } catch (error) {
        console.error('Error fetching macro data:', error);
        return null;
    }
}

// ============================================
// CALCULATION FUNCTIONS
// ============================================

/**
 * Calculate percentage from ATH
 */
function calculatePercentFromATH(currentPrice, athPrice) {
    if (!currentPrice || !athPrice) return 0;
    return ((currentPrice - athPrice) / athPrice) * 100;
}

/**
 * Calculate days since halving
 */
function calculateDaysSinceHalving() {
    const now = new Date();
    const diffTime = Math.abs(now - HALVING_DATE);
    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
    return diffDays;
}

/**
 * Calculate composite risk score (0-100)
 */
function calculateRiskScore(percentFromATH, fearGreedValue, priceChange24h, btcDominance) {
    const athScore = Math.max(0, Math.min(100, 100 + percentFromATH));
    const fgScore = fearGreedValue || 50;
    const priceScore = Math.max(0, Math.min(100, ((priceChange24h + 10) / 20) * 100));
    const domScore = Math.max(0, Math.min(100, (60 - btcDominance) * 5));
    
    const weights = {
        ath: 0.35,
        fg: 0.30,
        price: 0.20,
        dom: 0.15
    };
    
    const riskScore = 
        athScore * weights.ath +
        fgScore * weights.fg +
        priceScore * weights.price +
        domScore * weights.dom;
    
    return Math.round(Math.max(0, Math.min(100, riskScore)));
}

/**
 * Get risk zone label and class
 */
function getRiskZone(score) {
    if (score <= 30) {
        return { label: state.currentLang === 'en' ? 'Accumulation Zone' : 'Zona Akumulasi', class: 'accumulation' };
    } else if (score <= 70) {
        return { label: state.currentLang === 'en' ? 'Neutral Zone' : 'Zona Netral', class: 'neutral' };
    } else {
        return { label: state.currentLang === 'en' ? 'Overheated Zone' : 'Zona Overheated', class: 'overheated' };
    }
}

/**
 * Get sentiment interpretation
 */
function getSentimentInterpretation(value) {
    if (state.currentLang === 'id') {
        if (value <= 20) return 'Ketakutan Ekstrem';
        if (value <= 40) return 'Takut';
        if (value <= 60) return 'Netral';
        if (value <= 80) return 'Serakah';
        return 'Keserakahan Ekstrem';
    } else {
        if (value <= 20) return 'Extreme Fear';
        if (value <= 40) return 'Fear';
        if (value <= 60) return 'Neutral';
        if (value <= 80) return 'Greed';
        return 'Extreme Greed';
    }
}

// ============================================
// FORMATTING FUNCTIONS
// ============================================

function formatCurrency(value, decimals = 0) {
    if (value === null || value === undefined) return '$--';
    return '$' + value.toLocaleString('en-US', {
        minimumFractionDigits: decimals,
        maximumFractionDigits: decimals
    });
}

function formatLargeNumber(value) {
    if (value === null || value === undefined) return '$--';
    
    if (value >= 1e12) {
        return '$' + (value / 1e12).toFixed(2) + 'T';
    } else if (value >= 1e9) {
        return '$' + (value / 1e9).toFixed(2) + 'B';
    } else if (value >= 1e6) {
        return '$' + (value / 1e6).toFixed(2) + 'M';
    }
    return formatCurrency(value);
}

function formatPercentage(value, decimals = 2) {
    if (value === null || value === undefined) return '--%';
    const formatted = value.toFixed(decimals);
    return value >= 0 ? '+' + formatted + '%' : formatted + '%';
}

function formatBTC(value) {
    if (value === null || value === undefined) return '-- BTC';
    return value.toLocaleString('en-US', {
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
    }) + ' BTC';
}

function formatTime(date) {
    return date.toLocaleTimeString('en-US', {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: false
    });
}

// ============================================
// SMOOTH NUMBER ANIMATION
// ============================================

function animateValue(element, start, end, duration, formatter) {
    const startTime = performance.now();
    
    const animate = (currentTime) => {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);
        const easeOut = 1 - Math.pow(1 - progress, 3);
        const current = start + (end - start) * easeOut;
        
        element.textContent = formatter(current);
        
        if (progress < 1) {
            requestAnimationFrame(animate);
        }
    };
    
    requestAnimationFrame(animate);
}

function updateValueAnimated(elementId, newValue, formatter) {
    const element = document.getElementById(elementId);
    if (!element) return;
    
    const currentText = element.textContent;
    const currentValue = parseFloat(currentText.replace(/[^0-9.-]/g, '')) || 0;
    
    if (Math.abs(newValue - currentValue) > 0.01) {
        animateValue(element, currentValue, newValue, ANIMATION_DURATION, formatter);
    } else {
        element.textContent = formatter(newValue);
    }
}

// ============================================
// UI UPDATE FUNCTIONS
// ============================================

function updateMarketOverview(btcData, globalData) {
    if (!btcData?.market_data) return;
    
    const data = btcData.market_data;
    
    updateValueAnimated('btcPrice', data.current_price.usd, 
        (val) => formatCurrency(val, 0));
    
    const change24h = data.price_change_percentage_24h || 0;
    const changeElement = document.getElementById('priceChange24h');
    if (changeElement) {
        changeElement.textContent = formatPercentage(change24h);
        changeElement.className = 'card-value ' + (change24h >= 0 ? 'text-green' : 'text-red');
    }
    
    updateValueAnimated('marketCap', data.market_cap.usd,
        (val) => formatLargeNumber(val));
    
    updateValueAnimated('volume24h', data.total_volume.usd,
        (val) => formatLargeNumber(val));
    
    const supplyElement = document.getElementById('circulatingSupply');
    if (supplyElement) {
        supplyElement.textContent = formatBTC(data.circulating_supply);
    }
    
    if (globalData?.data?.market_cap_percentage?.btc) {
        const dominance = globalData.data.market_cap_percentage.btc;
        updateValueAnimated('btcDominance', dominance,
            (val) => val.toFixed(2) + '%');
    }
}

function updatePriceAndCycle(btcData, globalData, fearGreedData) {
    if (!btcData?.market_data) return;
    
    const data = btcData.market_data;
    const currentPrice = data.current_price.usd;
    const athPrice = data.ath.usd;
    
    updateValueAnimated('currentPrice', currentPrice,
        (val) => formatCurrency(val, 0));
    
    const athElement = document.getElementById('athPrice');
    if (athElement) {
        athElement.textContent = formatCurrency(athPrice, 0);
    }
    
    const percentFromATH = calculatePercentFromATH(currentPrice, athPrice);
    const athPercentElement = document.getElementById('percentFromATH');
    if (athPercentElement) {
        athPercentElement.textContent = formatPercentage(percentFromATH);
        athPercentElement.className = 'card-value ' + (percentFromATH >= -5 ? 'text-yellow' : 'text-green');
    }
    
    const daysSinceHalving = calculateDaysSinceHalving();
    const halvingElement = document.getElementById('daysSinceHalving');
    if (halvingElement) {
        halvingElement.textContent = daysSinceHalving.toLocaleString() + (state.currentLang === 'en' ? ' days' : ' hari');
    }
    
    const btcDominance = globalData?.data?.market_cap_percentage?.btc || 50;
    const fearGreedValue = fearGreedData ? parseInt(fearGreedData.value) : 50;
    const priceChange24h = data.price_change_percentage_24h || 0;
    
    const riskScore = calculateRiskScore(percentFromATH, fearGreedValue, priceChange24h, btcDominance);
    const riskZone = getRiskZone(riskScore);
    
    const riskScoreElement = document.getElementById('riskScore');
    if (riskScoreElement) {
        riskScoreElement.textContent = riskScore;
        riskScoreElement.className = 'risk-score-value risk-' + riskZone.class;
    }
    
    const riskFillElement = document.getElementById('riskScoreFill');
    if (riskFillElement) {
        setTimeout(() => {
            riskFillElement.style.width = riskScore + '%';
            riskFillElement.className = 'risk-score-fill risk-fill-' + riskZone.class;
        }, 100);
    }
    
    const riskLabelElement = document.getElementById('riskScoreLabel');
    if (riskLabelElement) {
        riskLabelElement.textContent = riskZone.label;
        riskLabelElement.className = 'risk-score-label risk-' + riskZone.class;
    }
}

function updateOnChainMetrics(onChainData) {
    if (!onChainData) return;
    
    // Hash Rate (convert from H/s to EH/s)
    const hashRate = onChainData.hash_rate / 1e18;
    updateElement('hashRate', hashRate.toFixed(2) + ' EH/s');
    
    // Difficulty (in trillions)
    const difficulty = onChainData.difficulty / 1e12;
    updateElement('difficulty', difficulty.toFixed(2) + ' T');
    
    // Transactions per day
    const txPerDay = onChainData.n_tx / 1000;
    updateElement('transactions24h', txPerDay.toFixed(1) + 'K');
    
    // Mempool size
    const mempoolSize = onChainData.mempool_size / 1024 / 1024;
    updateElement('mempoolSize', mempoolSize.toFixed(2) + ' MB');
    
    // Average block size
    const avgBlockSize = onChainData.blocks_size / 1024 / 1024 / 144; // Per day / blocks per day
    updateElement('avgBlockSize', avgBlockSize.toFixed(2) + ' MB');
    
    // Average block time (in minutes)
    const avgBlockTime = onChainData.minutes_between_blocks;
    updateElement('avgBlockTime', avgBlockTime.toFixed(2) + ' min');
}

function updateMacroData(macroData) {
    if (!macroData) return;
    
    // DXY
    updateElement('dxyValue', macroData.dxy.toFixed(2));
    const dxyChange = document.getElementById('dxyChange');
    if (dxyChange) {
        dxyChange.textContent = formatPercentage(macroData.dxyChange, 2);
        dxyChange.className = 'card-meta ' + (macroData.dxyChange >= 0 ? 'text-green' : 'text-red');
    }
    
    // S&P 500
    updateElement('sp500Value', macroData.sp500.toFixed(0));
    const sp500Change = document.getElementById('sp500Change');
    if (sp500Change) {
        sp500Change.textContent = formatPercentage(macroData.sp500Change, 2);
        sp500Change.className = 'card-meta ' + (macroData.sp500Change >= 0 ? 'text-green' : 'text-red');
    }
    
    // Gold
    updateElement('goldValue', '$' + macroData.gold.toFixed(0));
    const goldChange = document.getElementById('goldChange');
    if (goldChange) {
        goldChange.textContent = formatPercentage(macroData.goldChange, 2);
        goldChange.className = 'card-meta ' + (macroData.goldChange >= 0 ? 'text-green' : 'text-red');
    }
    
    // Fed Rate
    updateElement('fedRate', macroData.fedRate.toFixed(2) + '%');
    
    // Treasury 10Y
    updateElement('treasury10y', macroData.treasury10y.toFixed(2) + '%');
    
    // CPI
    updateElement('cpiValue', macroData.cpi.toFixed(1) + '%');
}

function updateDerivativesData(derivData) {
    if (!derivData) return;
    
    // Funding Rate
    updateElement('fundingRate', derivData.fundingRate.toFixed(4) + '%');
    const fundingStatus = document.getElementById('fundingStatus');
    if (fundingStatus) {
        const statusText = state.currentLang === 'en' ? 
            (derivData.fundingRate > 0.01 ? 'Bullish' : derivData.fundingRate < -0.01 ? 'Bearish' : 'Neutral') :
            (derivData.fundingRate > 0.01 ? 'Bullish' : derivData.fundingRate < -0.01 ? 'Bearish' : 'Netral');
        fundingStatus.textContent = statusText;
        fundingStatus.className = 'card-meta ' + 
            (derivData.fundingRate > 0.01 ? 'text-green' : derivData.fundingRate < -0.01 ? 'text-red' : 'text-yellow');
    }
    
    // Open Interest
    updateElement('openInterest', formatLargeNumber(derivData.openInterest));
    
    // Long/Short Ratio
    updateElement('longShortRatio', derivData.longShortRatio.toFixed(2));
    
    // 24h Derivatives Volume
    updateElement('derivVolume', formatLargeNumber(derivData.volume24h));
    
    // Liquidations (estimated)
    const liquidations = derivData.volume24h * 0.002; // Rough estimate
    updateElement('liquidations24h', '$' + (liquidations / 1e6).toFixed(0) + 'M');
    
    // OI Change
    updateElement('oiChange24h', formatPercentage(derivData.priceChange / 2, 2)); // Rough correlation
}

function updateStablecoinLiquidity(stablecoins) {
    const { usdt, usdc } = stablecoins;
    
    updateValueAnimated('usdtMarketCap', usdt,
        (val) => formatLargeNumber(val));
    
    updateValueAnimated('usdcMarketCap', usdc,
        (val) => formatLargeNumber(val));
    
    const total = usdt + usdc;
    updateValueAnimated('totalStablecoinCap', total,
        (val) => formatLargeNumber(val));
}

function updateSentiment(fearGreedData) {
    if (!fearGreedData) return;
    
    const value = parseInt(fearGreedData.value);
    const classification = fearGreedData.value_classification;
    
    const valueElement = document.getElementById('fearGreedValue');
    if (valueElement) {
        valueElement.textContent = value;
        
        if (value <= 30) {
            valueElement.className = 'card-value text-green';
        } else if (value <= 70) {
            valueElement.className = 'card-value text-yellow';
        } else {
            valueElement.className = 'card-value text-red';
        }
    }
    
    const classElement = document.getElementById('fearGreedClass');
    if (classElement) {
        classElement.textContent = classification || 'N/A';
    }
    
    const interpretation = getSentimentInterpretation(value);
    const interpElement = document.getElementById('fearGreedInterpretation');
    if (interpElement) {
        interpElement.textContent = interpretation;
    }
}

function updateTimestamp() {
    const element = document.getElementById('lastUpdate');
    if (element && state.lastUpdate) {
        element.textContent = formatTime(state.lastUpdate);
    }
}

function updateElement(id, value) {
    const element = document.getElementById(id);
    if (element) {
        element.textContent = value;
    }
}

// ============================================
// ADVANCED ANALYSIS FUNCTIONS
// ============================================

function toggleAnalysis(card) {
    card.classList.toggle('active');
}

function updateAdvancedAnalysis(btcData, globalData, stablecoins, fearGreedData) {
    if (!btcData?.market_data) return;
    
    const data = btcData.market_data;
    const currentPrice = data.current_price.usd;
    const athPrice = data.ath.usd;
    const percentFromATH = calculatePercentFromATH(currentPrice, athPrice);
    const priceChange24h = data.price_change_percentage_24h || 0;
    const btcDominance = globalData?.data?.market_cap_percentage?.btc || 50;
    const fearGreedValue = fearGreedData ? parseInt(fearGreedData.value) : 50;
    
    updateCyclePhase(percentFromATH, fearGreedValue, priceChange24h);
    
    const daysSinceHalving = calculateDaysSinceHalving();
    updateMarketSummary(percentFromATH, fearGreedValue, daysSinceHalving, btcDominance);
}

function updateCyclePhase(percentFromATH, fearGreedValue, priceChange24h) {
    let phase, comparison, difference;
    
    const isEnglish = state.currentLang === 'en';
    
    if (percentFromATH > -10 && fearGreedValue > 70) {
        phase = isEnglish ? 'Late Distribution' : 'Distribusi Akhir';
        comparison = isEnglish ? 'typical peak behavior with extreme greed' : 'perilaku puncak khas dengan keserakahan ekstrem';
        difference = isEnglish ? 'ETF demand provides unusual support at these levels' : 'Permintaan ETF memberikan dukungan tidak biasa pada level ini';
    } else if (percentFromATH > -30 && fearGreedValue > 50) {
        phase = isEnglish ? 'Markup/Acceleration' : 'Markup/Akselerasi';
        comparison = isEnglish ? 'strong uptrend momentum with healthy sentiment' : 'momentum uptrend kuat dengan sentimen sehat';
        difference = isEnglish ? 'institutional flows via ETFs reducing volatility vs previous cycles' : 'aliran institusional via ETF mengurangi volatilitas vs siklus sebelumnya';
    } else if (percentFromATH > -50 && fearGreedValue < 50) {
        phase = isEnglish ? 'Accumulation/Early Markup' : 'Akumulasi/Markup Awal';
        comparison = isEnglish ? 'early cycle accumulation with subdued sentiment' : 'akumulasi siklus awal dengan sentimen yang diredam';
        difference = isEnglish ? 'supply shock from halving not yet fully priced in' : 'kejutan pasokan dari halving belum sepenuhnya diperhitungkan';
    } else {
        phase = isEnglish ? 'Deep Accumulation/Markdown' : 'Akumulasi Dalam/Markdown';
        comparison = isEnglish ? 'bear market or deep correction territory' : 'pasar bear atau wilayah koreksi dalam';
        difference = isEnglish ? 'structural demand from ETFs shortening bear market duration' : 'permintaan struktural dari ETF mempersingkat durasi pasar bear';
    }
    
    updateElement('currentPhase', phase);
    updateElement('cycleComparison', comparison);
    updateElement('cycleDifference', difference);
    
    const progress = Math.max(0, Math.min(100, 100 + percentFromATH));
    const cycleProgress = document.getElementById('cycleProgress');
    if (cycleProgress) {
        cycleProgress.style.width = progress + '%';
    }
}

function updateMarketSummary(percentFromATH, fearGreedValue, daysSinceHalving, btcDominance) {
    let phase, bias;
    
    const isEnglish = state.currentLang === 'en';
    
    if (daysSinceHalving < 180) {
        phase = isEnglish ? 'early post-halving consolidation phase' : 'fase konsolidasi pasca-halving awal';
    } else if (daysSinceHalving < 365) {
        phase = isEnglish ? 'mid-cycle accumulation phase' : 'fase akumulasi mid-cycle';
    } else if (daysSinceHalving < 540) {
        phase = isEnglish ? 'late-cycle acceleration phase' : 'fase akselerasi late-cycle';
    } else {
        phase = isEnglish ? 'cycle maturity/distribution phase' : 'fase kematangan/distribusi siklus';
    }
    
    if (percentFromATH > -20 && fearGreedValue > 60) {
        bias = isEnglish ? 'cautiously optimistic but watch for overheating' : 'optimis hati-hati tapi waspada overheating';
    } else if (percentFromATH > -40 && fearGreedValue < 70) {
        bias = isEnglish ? 'constructive medium-term outlook' : 'outlook jangka menengah konstruktif';
    } else {
        bias = isEnglish ? 'attractive risk/reward for long-term holders' : 'risk/reward menarik untuk holder jangka panjang';
    }
    
    updateElement('summaryPhase', phase);
    updateElement('summaryBias', bias);
    
    updateOutlookBoxes(daysSinceHalving, percentFromATH, fearGreedValue);
}

function updateOutlookBoxes(daysSinceHalving, percentFromATH, fearGreedValue) {
    const isEnglish = state.currentLang === 'en';
    
    let shortTerm;
    if (fearGreedValue > 75) {
        shortTerm = isEnglish ? 
            'Overheated conditions, consolidation or pullback likely before next leg' :
            'Kondisi overheated, kemungkinan konsolidasi atau pullback sebelum leg berikutnya';
    } else if (fearGreedValue < 25) {
        shortTerm = isEnglish ?
            'Oversold conditions, bounce likely as fear reaches extreme' :
            'Kondisi oversold, kemungkinan bounce saat ketakutan mencapai ekstrem';
    } else {
        shortTerm = isEnglish ?
            'Range consolidation likely, volatility compression, watch for breakout catalyst' :
            'Kemungkinan konsolidasi range, kompresi volatilitas, pantau katalis breakout';
    }
    updateElement('outlookShort', shortTerm);
    
    let mediumTerm;
    if (daysSinceHalving < 365) {
        mediumTerm = isEnglish ?
            'Bullish bias supported by ETF demand, halving supply reduction, and expected monetary easing' :
            'Bias bullish didukung permintaan ETF, pengurangan pasokan halving, dan pelonggaran moneter yang diharapkan';
    } else {
        mediumTerm = isEnglish ?
            'Late-cycle dynamics, reduced upside but still supported by institutional flows' :
            'Dinamika late-cycle, upside berkurang tapi masih didukung aliran institusional';
    }
    updateElement('outlookMedium', mediumTerm);
    
    let longTerm;
    if (daysSinceHalving < 270) {
        longTerm = isEnglish ?
            'Cycle peak expected Q4 2025 - Q1 2026, followed by distribution phase and eventual correction' :
            'Puncak siklus diperkirakan Q4 2025 - Q1 2026, diikuti fase distribusi dan koreksi akhirnya';
    } else if (daysSinceHalving < 450) {
        longTerm = isEnglish ?
            'Approaching peak window, prepare for distribution phase in coming quarters' :
            'Mendekati window puncak, siapkan fase distribusi di kuartal mendatang';
    } else {
        longTerm = isEnglish ?
            'Late cycle - consider de-risking, next accumulation phase likely 2026-2027' :
            'Late cycle - pertimbangkan de-risking, fase akumulasi berikutnya kemungkinan 2026-2027';
    }
    updateElement('outlookLong', longTerm);
}

// ============================================
// MAIN DATA FETCH & UPDATE
// ============================================

async function fetchAndUpdateAll() {
    console.log('Fetching data...');
    
    try {
        const [btcData, globalData, stablecoins, fearGreed, onChainData, macroData, derivData] = await Promise.all([
            fetchBitcoinData(),
            fetchGlobalData(),
            fetchStablecoinData(),
            fetchFearGreedIndex(),
            fetchOnChainData(),
            fetchMacroData(),
            fetchDerivativesData()
        ]);
        
        state.btcData = btcData;
        state.globalData = globalData;
        state.stablecoins = stablecoins;
        state.fearGreed = fearGreed;
        state.onChainData = onChainData;
        state.macroData = macroData;
        state.derivativesData = derivData;
        state.lastUpdate = new Date();
        
        if (btcData) {
            updateMarketOverview(btcData, globalData);
            updatePriceAndCycle(btcData, globalData, fearGreed);
        }
        
        if (onChainData) {
            updateOnChainMetrics(onChainData);
        }
        
        if (macroData) {
            updateMacroData(macroData);
        }
        
        if (derivData) {
            updateDerivativesData(derivData);
        }
        
        if (stablecoins) {
            updateStablecoinLiquidity(stablecoins);
        }
        
        if (fearGreed) {
            updateSentiment(fearGreed);
        }
        
        updateAdvancedAnalysis(btcData, globalData, stablecoins, fearGreed);
        updateTimestamp();
        
        console.log('Data updated successfully');
    } catch (error) {
        console.error('Error in fetchAndUpdateAll:', error);
    }
}

// ============================================
// INITIALIZATION
// ============================================

function init() {
    console.log('Bitcoin Intelligence Dashboard initialized');
    
    fetchAndUpdateAll();
    setInterval(fetchAndUpdateAll, UPDATE_INTERVAL);
    setInterval(updateTimestamp, 1000);
}

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
} else {
    init();
}
    </script>
</body>
</html>
